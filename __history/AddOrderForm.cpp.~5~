	//---------------------------------------------------------------------------

	#include <vcl.h>
	#pragma hdrstop

	#include "AddOrderForm.h"
	//---------------------------------------------------------------------------
	#pragma package(smart_init)
	#pragma resource "*.dfm"
	TForm5 *Form5;
	//---------------------------------------------------------------------------
	__fastcall TForm5::TForm5(TComponent* Owner)
		: TForm(Owner)
	{
	}
	//---------------------------------------------------------------------------
	void __fastcall TForm5::ButtonAddClick(TObject *Sender)
	{
		FDQuery1->Close();  // Закрити запит, якщо він відкритий
		FDQuery1->SQL->Text = "SELECT drone_id FROM DroneModel WHERE drone_name = :drone_name";
		FDQuery1->ParamByName("drone_name")->AsString = LabeledEditDroneName->Text;  // Передаємо параметр username

		FDQuery1->Open();  // Виконати запит
		int drone_id = 0;
		// Перевіряємо, чи є запис у результаті
		if (!FDQuery1->Eof) {
			drone_id = FDQuery1->FieldByName("drone_id")->AsInteger;
		} else {
			ShowMessage("Запис не знайдено.");
			FDQuery1->SQL->Text = "INSERT INTO DroneModel (drone_name, drone_type) VALUES (:drone_name, :drone_type)";
			FDQuery1->ParamByName("drone_name")->AsString = LabeledEditDroneName->Text;
			FDQuery1->ParamByName("drone_type")->AsString = ComboBoxDroneType->Text;  // Або будь-який інший тип
			FDQuery1->ExecSQL();
		}

		FDQuery1->Close();  // Закриваємо запит після завершення

//		   // Перевірка чи існує дрон у DroneModel
//		FDQuery1->SQL->Text = "SELECT drone_id FROM DroneModel WHERE drone_name = :drone_name AND drone_type = :drone_type";
//		FDQuery1->ParamByName("drone_name")->AsString = LabeledEditDroneName->Text;  // Передбачається, що у вас є поле для введення назви дрону
//		FDQuery1->ParamByName("drone_type")->AsString = ComboBoxDroneType->Text;
//
//		FDQuery1->Open();
//
//		int drone_id = 0;
//
//		if (!FDQuery1->Eof) {
//			// Якщо дрон існує, отримуємо його ID
//			drone_id = FDQuery1->FieldByName("drone_id")->AsInteger;
//		} else {
//			// Якщо дрона немає, додаємо новий запис у таблицю DroneModel
//			FDQuery1->SQL->Text = "INSERT INTO DroneModel (drone_name, drone_type) VALUES (:drone_name, :drone_type)";
//			FDQuery1->ParamByName("drone_name")->AsString = LabeledEditDroneName->Text;
//			FDQuery1->ParamByName("drone_type")->AsString = ComboBoxDroneType->Text;  // Або будь-який інший тип
//			FDQuery1->ExecSQL();
//
//			// Отримуємо ID новоствореного дрона
//			FDQuery1->SQL->Text = "SELECT LAST_INSERT_ID() AS drone_id";
//			FDQuery1->Open();
//			drone_id = FDQuery1->FieldByName("drone_id")->AsInteger;
//		}
//
//		// Тепер виконуємо вставку у MilitaryRequests
//		FDQuery1->SQL->Text = "INSERT INTO MilitaryRequests (drone_id, quantity, request_date, status, fulfilled_quantity) "
//							  "VALUES (:drone_id, :quantity, :request_date, :status, :fulfilled_quantity)";
//		FDQuery1->ParamByName("drone_id")->AsInteger = drone_id;
//		FDQuery1->ParamByName("quantity")->AsInteger = StrToInt(LabeledEditQuantity->Text);
//		FDQuery1->ParamByName("request_date")->AsDate = DateTimePickerRequestDate->Date;
//		FDQuery1->ParamByName("status")->AsString = "In Process";
//		FDQuery1->ParamByName("fulfilled_quantity")->AsInteger = 0;
//
//		try {
//			FDQuery1->ExecSQL();  // Виконати запит
//			ShowMessage("Запит успішно додано!");
//			TForm3 *ArmyForm = new TForm3(this);
//			ArmyForm->Show();
//			this->Close();
//		}
//		catch (Exception &e) {
//			ShowMessage("Помилка при додаванні запиту: " + e.Message);
//		}

	}
	//---------------------------------------------------------------------------
	void __fastcall TForm5::FormCreate(TObject *Sender)
	{
		FDQuery1->Connection = FDConnection1;
		DateTimePickerRequestDate->Date = Now();
	}
	//---------------------------------------------------------------------------
